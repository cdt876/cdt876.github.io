<!DOCTYPE PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   SYSTEM "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
        <title>GSA File Manager</title>

        <!--BEGIN STYLESHEET/SCRIPT-->
        <!--LOAD THREE STYLESHEETS, 1 COMMON, 1 FOR NETSCAPE, 1 FOR IE-->
<!--        <link rel="stylesheet" type="text/css" href="/images/w3/v6/css/w3_common.css" />
        <link rel="stylesheet" type="text/css" href="/images/w3/v6/css/w3_netscape.css" disabled />
-->
        <script language="JavaScript1.2" type="text/javascript">
        <!--
//                if (document.all) document.createStyleSheet("/images/w3/v6/css/w3_ie.css");
        //-->
        </script>
        <!--END STYLESHEET/SCRIPT-->
</head>

<body bgcolor="#FFFFFF" marginheight="0" marginwidth="0" leftmargin="0" topmargin="0">

<!--BEGIN CONTENT SHELL-->
<CENTER>
                        <script type="text/javaScript" src="/ui/v8/scripts/scripts.js"></script>
<SCRIPT SRC="/gsatools/Cookies.js"></SCRIPT>

<SCRIPT LANGUAGE="JavaScript1.2">
function getBrowse(element) {
  var brsWin = window.open('', 'ausgsaBrowseTop', 'toolbar=no,location=no,directories=no,status=no,dependent=no,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no,width=580,height=400')
  brsWin.browseTarget = element
}
</SCRIPT>



<link rel="stylesheet" type="text/css" src="http://w3.ibm.com/ui/v8/css/v4-scre
en.css"></link>
<LINK REL="stylesheet" TYPE="text/css" HREF="/gsadoc/gsa.css"></LINK>
<STYLE TYPE="text/css" MEDIA="all">
  html,body     {min-width:400px;}
  table.basic-table { width: 400 }
</STYLE>

<SCRIPT LANGUAGE="JavaScript1.2">
function submittedForm(form){

  var src = form.PWSSource.value
  var pwsstartdate = form.PWSStartDate.value
  var pwsendate = form.PWSEndDate.value

  if ( src == "" ) {
     alert("The source folder name is empty. Please enter a valid folder name.")
     return false;
  }

  if ( pwsstartdate == "" ) {
     alert("The start date field is empty. Please enter a start date in the form YYYYMMDD.")
     return false;
  }

  if ( pwsendate == "" ) {
     alert("The end date field is empty. Please enter an end date in the form YYYYMMDD.")
     return false;
  }

  var valid_number = /^[0-9]*$/

  var results = valid_number.test(pwsstartdate)
  if (! results ) {
     alert("The Start Date must be numerals (0-9) and in the form YYYYMMDD")
     return false;
  }

  results = valid_number.test(pwsendate)
  if (! results ) {
     alert("The End Date must be numerals (0-9) and in the form YYYYMMDD")
     return false;
  }

  if ( pwsendate < pwsstartdate ) {
     alert("The end date is before the specified start date. Please enter an end date after the start date.")
     return false;
  }

  var strLen = src.length - 1;
  var lastChar = src.substr(strLen, 1);

  if ( lastChar == "/" ) {
      src = src.substr( 0, strLen );
  }

  var top = /^\//

  if ( !src.match(top) ) {
     alert("The source path must start with '/'.")
     return false;
  }

  var testdot1 = /\/\.\.$/
  results = testdot1.test(src)

  var testdot2 = /\/\.\.\//
  results2 = testdot2.test(src)

  var testdot3 = /\/\.\//
  results3 = testdot3.test(src)

  var testdot4 = /\/\.$/
  results4 = testdot4.test(src)

  if ( results || results2 || results3 || results4 ) {
     alert("You may not use relative paths (eg. '..') for this tool.")
     return false;
  }

  strLen = pwsstartdate.length;
  if ( strLen < 8 ) {
     alert("The start date is not in the correct format (YYYYMMDD).")
     return false;
  }

  var st20 = /^20/

  if ( !pwsstartdate.match(st20) ) {
     alert("The start date must begin with the 4 digit year (eg. 2010).")
     return false;
  }

  var sy = pwsstartdate.slice(0,4);
  var sm = pwsstartdate.slice(4,6);
  var sd = pwsstartdate.slice(6);

  if ( sy < 2009 || sy > 2016 ) {
     alert("The start year must be between 2009 and 2016. You entered: " + sy)
     return false;
  }

  if ( sm < 01 || sm > 12 ) {
     alert("The start month must be between 01 and 12. You entered: " + sm)
     return false;
  }

  if ( sd < 01 || sd > 31 ) {
     alert("The start day must be between 01 and 31. You entered: " + sd)
     return false;
  }


  strLen = pwsendate.length;
  if ( strLen < 8 ) {
     alert("The end date is not in the correct format (YYYYMMDD).")
     return false;
  }

  if ( !pwsendate.match(st20) ) {
     alert("The end date must begin with the 4 digit year (eg. 2010).")
     return false;
  }

  var ey = pwsendate.slice(0,4);
  var em = pwsendate.slice(4,6);
  var ed = pwsendate.slice(6);

  if ( ey < 2009 || ey > 2016 ) {
     alert("The start year must be between 2009 and 2016. You entered: " + ey)
     return false;
  }

  if ( em < 01 || em > 12 ) {
     alert("The ending month must be between 01 and 12. You entered: " + em)
     return false;
  }

  if ( ed < 01 || ed > 31 ) {
     alert("The ending day must be between 01 and 31. You entered: " + ed)
     return false;
  }


    return true;
}
function submitButton(form){
    if(submittedForm(form))
    form.submit();
}

</SCRIPT>

<P ALIGN="center"><a class="popup-link" style="text-align:left" href="javascript:popup('/gsadoc/help/popup-stats.html','internal',500,400)">Quick Help</a></P>
<FORM ACTION=../backend/proftplog.cgi METHOD=Post ENCTYPE=application/x-www-form-urlencoded ONSUBMIT="javascript:return submittedForm(document.forms.GSAToolForm)" TARGET=ausgsaTaskWin NAME=GSAToolForm>

<BR>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="100%">
<TR ALIGN=RIGHT><td> </TD></TR>
<TR ALIGN=CENTER><td>
  <SPAN CLASS="heading">Statistics for FTP and HTTP Logging</SPAN>
</TD></TR>
</TABLE>
<BR>
<TABLE CLASS="basic-table" BORDER=0 CELLSPACING=2 CELLPADDING=2>
  <TR CLASS="even">
    <TD ALIGN=LEFT VALIGN=CENTER WIDTH=260><TABLE BORDER=0 CELLSPACING=5 CELLPADDING=5><TR><TD align=left><B>Source Name:</B><INPUT TYPE=text NAME=PWSSource VALUE="/gsa/ausgsa/projects/c/csat" SIZE=60>
</TD></TR><TR><TD align=left><B>Select Date Range: <INPUT CHECKED type=radio name=PWSDateRange value=7 ONCLICK=javascript:setDateRange(this,20160704,20160711)><B>7 Days</B> <INPUT type=radio name=PWSDateRange value=30 ONCLICK=javascript:setDateRange(this,20160611,20160711)><B>30 Days</B>  <INPUT type=radio name=PWSDateRange value=60 ONCLICK=javascript:setDateRange(this,20160512,20160711)><B>60 Days</B>
</TD></TR><TR><TD align=left><FONT COLOR=BLUE>Or enter specific Start and End dates (YYYYMMDD)</FONT>
</TD></TR><TR><TD align=left><B>Start Date: </B><INPUT TYPE=text NAME=PWSStartDate SIZE=8 VALUE=20160704><B>   End Date:  </B><INPUT TYPE=text NAME=PWSEndDate SIZE=8 VALUE=20160711>
</TD></TR></TABLE></TD>
  </TR>
  <TR>
    <TD ALIGN=CENTER COLSPAN=2>
         <span class="button-blue"><input type="button" value="Submit" onClick="submitButton(document.forms.GSAToolForm)"></span>

         <span class="button-blue"><input type="button" value="Cancel" onclick="top.close()"></span>

    </TD>
  </TR>
</TABLE>
</FORM>
<SCRIPT LANGUAGE="JavaScript1.2">

  function setDateRange(obj,sdate,edate)
  {
    var form = document.forms.GSAToolForm;
    form.PWSStartDate.value = sdate;
    form.PWSEndDate.value = edate;
  }


</SCRIPT>

</CENTER>
<!--END CONTENT SHELL-->
</body>
</html>

<!DOCTYPE PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   SYSTEM "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
        <title>GSA File Manager</title>

        <!--BEGIN STYLESHEET/SCRIPT-->
        <!--LOAD THREE STYLESHEETS, 1 COMMON, 1 FOR NETSCAPE, 1 FOR IE-->
<!--        <link rel="stylesheet" type="text/css" href="/images/w3/v6/css/w3_common.css" />
        <link rel="stylesheet" type="text/css" href="/images/w3/v6/css/w3_netscape.css" disabled />
-->
        <script language="JavaScript1.2" type="text/javascript">
        <!--
//                if (document.all) document.createStyleSheet("/images/w3/v6/css/w3_ie.css");
        //-->
        </script>
        <!--END STYLESHEET/SCRIPT-->
</head>

<body bgcolor="#FFFFFF" marginheight="0" marginwidth="0" leftmargin="0" topmargin="0">

<!--BEGIN CONTENT SHELL-->
<CENTER>
                        <BODY BGCOLOR=#FFFFFF>
<script type="text/javaScript" src="/ui/v8/scripts/scripts.js"></script>
<SCRIPT SRC="/gsatools/Cookies.js"></SCRIPT>
<script src="/gsatools/Posix.js" language="javascript"></script>

<SCRIPT LANGUAGE="JavaScript1.2">
function getBrowse(element) {
  var brsWin = window.open('', 'ausgsaBrowseTop', 'toolbar=no,location=no,directories=no,status=no,dependent=no,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no,width=580,height=400')
  brsWin.browseTarget = element
}
</SCRIPT>



<LINK REL="stylesheet" TYPE="text/css" HREF="/gsadoc/gsa.css"></LINK>
<STYLE TYPE="text/css" MEDIA="all">
  html,body     {min-width:400px;}
/*  table.basic-table { width: 400 }*/
</STYLE>


<SCRIPT LANGUAGE="JavaScript1.2">
function resetButton(form){
    form.reset();
}

function submittedForm(form){

  var src = form.PWSSourcePath.value
  var oldid = form.PWSOldOwner.value
  var newid = form.PWSNewOwner.value
  var recurs = form.PWSRecurse.value

  var ok = 0;
  

  if ( src == "" && ok == 0 ) {
     alert("The GSA path is empty. Please enter a valid path.")
     return false;
  }

  var testdot1 = /\/\.\.$/
  results = testdot1.test(src)

  var testdot2 = /\/\.\.\//
  results2 = testdot2.test(src)

  var testdot3 = /\/\.\//
  results3 = testdot3.test(src)

  var testdot4 = /\/\.$/
  results4 = testdot4.test(src)

  if ( results || results2 || results3 || results4 ) {
     alert("You may not use relative paths (eg. '..') for this tool.")
     return
  }

  var testcell = /^\/gsa\/ausgsa/
  var results = testcell.test(src)

  if (! results ) {
     alert("You may not change the owner of a file in a different GSA cell or a non-GPFS directory. Verify you entered the path correctly.")
     return
  }

  var testhome = /^\/gsa\/ausgsa\/home\//
  var testproj = /^\/gsa\/ausgsa\/projects\//
  var testtdsk = /^\/gsa\/ausgsa\/tdisk\//
  var homeres = testhome.test(src)
  var projres = testproj.test(src)
  var tdskres = testtdsk.test(src)

  if ((! homeres) && (! projres) && (! tdskres) ) {
     alert("You must enter a path in the home or projects or tdisk directory. Verify you entered the path correctly.")
     return
  }


  if ( oldid == "" && ok == 0 ) {
     alert("The old owner ID field is empty. Please enter a valid GSA ID.")
     return false;
  }

  if ( newid == "" && ok == 0 ) {
     alert("The new owner ID field is empty. Please enter a valid GSA ID.")
     return false;
  }



    return true;
}
function submitButton(form){
    if(submittedForm(form))
    form.submit();
}

</SCRIPT>
<P ALIGN="center"><a class="popup-link" style="text-align:left" href="javascript:popup('/gsadoc/help/popup-chown.html','internal',500,400)">Quick Help</a></P>
<FORM ACTION=../backend/fm_chown.cgi METHOD=Post ENCTYPE=application/x-www-form-urlencoded ONSUBMIT="javascript:submittedForm(document.forms.GSAToolForm)" TARGET=ausgsaTaskWin NAME=GSAToolForm>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH="100%">
<TR ALIGN=RIGHT><td> </TD></TR>
<TR ALIGN=CENTER><td>
  <SPAN CLASS="heading">Chown</SPAN>
</TD></TR>
</TABLE>
<BR>
<CENTER>
  <TABLE CLASS="basic-table" CELLSPACING=0>

<TR CLASS="even"><TD align=left><B>Source Path:  </B><INPUT TYPE=text NAME=PWSSourcePath SIZE=40 VALUE="/gsa/ausgsa/projects/c/csat"></TD></TR>
<TR CLASS="even"><TD align=left><B>Old Owner ID:  </B><INPUT TYPE=text NAME=PWSOldOwner SIZE=20 VALUE="CurrentOwner"></TD></TR>
<TR CLASS="even"><TD align=left><B>New Owner ID:  </B><INPUT TYPE=text NAME=PWSNewOwner SIZE=20 VALUE=""></TD></TR>
<TR CLASS="even"><TD align=left><B>Recurse directory:  </B><INPUT TYPE=checkbox NAME=PWSRecurse VALUE=recurse></TD></TR>
<TR CLASS="even"><TD align=left>Change 'Old Owner ID' only if the top level directory is not owned by the userid you wish to change.</TD></TR>
  <TR>
    <TD ALIGN=LEFT VALIGN=CENTER><TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0></TABLE></TD>
  </TR>
  <TR>
    <TD ALIGN=CENTER COLSPAN=5>
         <span class="button-blue"><input type="button" value="Submit" onClick="submitButton(document.forms.GSAToolForm)"></span>

         <span class="button-blue"><input type="button" value="Cancel" onclick="top.close()"></span>

<!--
       <A HREF=javascript:submitButton(document.forms.GSAToolForm)><IMG BORDER=0 SRC="/gsatools/images/wsmsubmit.gif" ALT="Submit" TITLE="Submit"></A>
       <A HREF=javascript:javascript:top.close()><IMG BORDER=0 SRC="/gsatools/images/wsmcancel.gif" ALT="Cancel" TITLE="Cancel"></A>
-->
    </TD>
  </TR>

  <TR><TD>
  <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0>
    
  </TD></TR>

  </TABLE>
</CENTER>
<BR>

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0>
  <TR>
     <TD ALIGN=CENTER><FONT SIZE=-1><b> </b><BR> </TD>
  </TR>
  <TR>
    <TD ALIGN=LEFT WIDTH=400><FONT COLOR=BLUE SIZE=-1><OL></OL></FONT></TD>
  </TR>
</TABLE>

</FORM>
<SCRIPT LANGUAGE="JavaScript1.2">

// <!-- Begin 
function explain_ch_man(name, output, msg) {newwin = window.open('','','top=150,left=150,width=425,height=350');
if (!newwin.opener) newwin.opener = self;
with (newwin.document)
{
open();
write('<html>');
write('<BODY bgcolor="white">');
write('<form name=form>' + msg + '<br>');
write('<p><input type=button value="Click for more help" onClick=window.open("../../gsadoc/help/fm.shtml#query")>');
write('<p><input type=button value="Click to close" onClick=window.close()>');
write('</center></form></body></html>');
close();
   }
}
//End -->



</SCRIPT>

</CENTER>
<!--END CONTENT SHELL-->
</body>
</html>
